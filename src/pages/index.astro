---
// 启用 SSR - 每次请求时动态渲染此页面
export const prerender = false;

import Layout from '~/layouts/PageLayout.astro';

import Content from '~/components/widgets/Content.astro';
import Projects from '~/components/widgets/Projects.astro';
import Sites from '~/components/widgets/Sites.astro';
import Modal from '~/components/Modal.astro';
import HonorCarousel from '~/components/widgets/HonorCarousel.astro';
import type { Project, Site, ApiSiteResponse } from '~/types';

// 导入图片

// API 配置
const API_BASE_URL = 'https://api-g.lacs.cc/api';

// 获取项目数据
let projectsData: Project[] = [];
try {
  const projectsResponse = await fetch(`${API_BASE_URL}/info-management/projects`);
  if (projectsResponse.ok) {
    const projectsResult = await projectsResponse.json();
    if (projectsResult.success && projectsResult.data) {
      projectsData = projectsResult.data;
      console.log('成功获取项目数据，共', projectsData.length, '条记录');
    } else {
      console.warn('项目 API 返回数据格式异常:', projectsResult);
    }
  } else {
    console.error('项目 API 响应错误:', projectsResponse.status, projectsResponse.statusText);
  }
} catch (error) {
  console.error('获取项目数据失败:', error);
}

// 获取站点数据
let sitesData: Site[] = [];
try {
  const sitesResponse = await fetch(`${API_BASE_URL}/websites`);
  if (sitesResponse.ok) {
    const sitesResult = await sitesResponse.json();
    if (sitesResult.success && sitesResult.data && sitesResult.data.websites) {
      // 新的 API 结构：data.websites 包含站点数组
      sitesData = sitesResult.data.websites.map((site: ApiSiteResponse) => ({
        id: site.id,
        name: site.name,
        description: site.description || `访问 ${site.name}`,
        link: site.domain,
        logo: site.logo || '',
        iconContent: site.logo ? '' : site.name.charAt(0), // 如果没有 logo，使用首字母
        bgColor: site.category || '#3B82F6', // 默认蓝色
        analyticsEvent: `visit_${site.name.toLowerCase().replace(/\s+/g, '_')}`,
        category: site.category || '网站',
      }));
      console.log('成功获取站点数据，共', sitesData.length, '条记录');
      console.log('分页信息:', sitesResult.data.pagination);
    } else {
      console.warn('站点 API 返回数据格式异常:', sitesResult);
    }
  } else {
    console.error('站点 API 响应错误:', sitesResponse.status, sitesResponse.statusText);
  }
} catch (error) {
  console.error('获取站点数据失败:', error);
}

const metadata = {
  title: '领创工作室 - 数码科技与创意内容平台',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->

  <section class="hero-section relative h-screen w-full not-prose overflow-hidden">
    <!-- 视频背景（大屏幕） -->
    <video autoplay muted playsinline class="hidden lg:block absolute inset-0 w-full h-full object-cover">
      <source src="/videos/lacs_mg_noend.webm" type="video/webm" />
    </video>

    <!-- 渐变背景（小屏幕和中屏幕） -->
    <div class="absolute inset-0 bg-slate-900 lg:hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-900/80 via-slate-900/90 to-slate-900"></div>
    </div>

    <!-- 视频遮罩层 -->
    <div
      class="absolute inset-0 bg-gradient-to-br from-blue-900/60 via-slate-900/70 to-slate-900/80 lg:bg-slate-900/50"
    >
    </div>

    <!-- 动态粒子背景 -->
    <div class="absolute inset-0">
      <div class="particles-container"></div>
    </div>

    <!-- 主要内容 -->
    <div class="relative h-full flex items-center justify-center px-4 sm:px-6 lg:px-8 z-10">
      <div
        class="text-center max-w-5xl mx-auto lg:bg-slate-900/20 lg:backdrop-blur-sm lg:p-8 lg:rounded-3xl lg:border lg:border-white/10"
      >
        <!-- 标语图片 -->
        <div class="mb-10">
          <img
            src="https://img.lacs.cc/img/25-08/16/lacs-maxbg-all-icons.webp"
            alt="领创工作室"
            class="h-24 md:h-36 lg:h-44 xl:h-52 w-auto mx-auto object-contain rounded-2xl"
            loading="eager"
          />
        </div>

        <!-- 主标题 -->
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tighter tracking-tighter mb-6 text-white">
          专注于数码科技与
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400"> 创意内容 </span>
          领域
        </h1>

        <!-- 副标题 -->
        <p class="text-lg md:text-xl text-slate-300 mb-10 max-w-3xl mx-auto">
          专注于移动设备工具开发、软件开发和数字内容创作的创新团队，为您提供高质量的软件工具和技术解决方案
        </p>

        <!-- 行动召唤按钮 -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
          <a
            href="#projects"
            class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 text-lg font-semibold rounded-full shadow-lg shadow-blue-600/30 hover:shadow-xl hover:shadow-blue-600/40 transform hover:-translate-y-0.5 transition-all duration-200"
          >
            查看项目
          </a>
          <a
            href="#sites"
            class="bg-transparent text-white border border-slate-600 hover:bg-slate-800 hover:border-slate-500 px-8 py-4 text-lg font-semibold rounded-full shadow-lg transform hover:-translate-y-0.5 transition-all duration-200"
          >
            探索分站
          </a>
        </div>

        <!-- 滚动提示 -->
        <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce lg:opacity-70">
          <svg
            class="w-6 h-6 text-blue-400"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects Widget ****************** -->

  <Projects
    id="projects"
    title="我们的项目作品"
    subtitle="探索领创工作室开发的各类软件工具和创意项目"
    tagline="项目展示"
    projects={projectsData}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-slate-800"></div>
    </Fragment>
  </Projects>

  <!-- Sites Widget ****************** -->

  <Sites
    id="sites"
    title="我们的分站平台"
    subtitle="探索领创工作室旗下的各个专业平台"
    tagline="分站导航"
    sites={sitesData}
  />

  <!-- About Widget ******************* -->

  <Content id="about" title="关于领创工作室" subtitle="我们是一个专注于数码科技领域的创新团队" tagline="关于我们">
    <Fragment slot="content">
      <div class="mb-12">
        <p class="text-lg dark:text-slate-400 mb-8">
          领创工作室成立于2020年，致力于为用户提供高质量的软件工具和技术解决方案。专注于移动设备工具开发、软件开发和数字内容创作。
        </p>

        <!-- 时间流程图 -->
        <div class="timeline-container">
          <h3 class="text-2xl font-bold mb-6 text-center text-slate-800 dark:text-white">发展历程</h3>

          <!-- 桌面端时间线 -->
          <div class="hidden md:block relative">
            <!-- 时间线 -->
            <div class="absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-blue-200 dark:bg-blue-800"></div>

            <!-- 2020年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 text-right pr-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2020年</h4>
                  <p class="text-sm dark:text-slate-400">工作室‘’成立”，开始专注于安卓移动应用开发</p>
                </div>
              </div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8"></div>
            </div>

            <!-- 2021年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 pr-8"></div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2021年</h4>
                  <p class="text-sm dark:text-slate-400">
                    着手Logo设计、平面设计，为仙龙阁、智简云、HZLM画质助手、LY画质盒、十三导航、极光点等产品、组织设计Logo
                  </p>
                </div>
              </div>
            </div>

            <!-- 2022年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 text-right pr-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2022年</h4>
                  <p class="text-sm dark:text-slate-400">开发多款安卓小程序和安卓面具模块资源</p>
                </div>
              </div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8"></div>
            </div>

            <!-- 2023年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 pr-8"></div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2023年</h4>
                  <p class="text-sm dark:text-slate-400">
                    专注安卓玩机领域，免费/付费远程刷机救砖服务上百个客户、一键Root工具箱发布（用户破千）
                  </p>
                </div>
              </div>
            </div>

            <!-- 2024年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 text-right pr-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2024年</h4>
                  <p class="text-sm dark:text-slate-400">
                    专注安卓玩机领域，付费远程刷机救砖服务上线闲鱼和淘宝平台（单月最高破4000元收入）、基于Bat的澎湃解锁工具箱发布（累积用户近千人）
                  </p>
                </div>
              </div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8"></div>
            </div>

            <!-- 2025年 -->
            <div class="flex items-center mb-8">
              <div class="flex-1 pr-8"></div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2025年</h4>
                  <p class="text-sm dark:text-slate-400">
                    关键年，持续专注安卓玩机领域、编程能力与数字内容平台，基于Pyside6的澎湃解锁工具箱发布（累积用户近万人）、基于Tauri+React+Tauri的玩机管家发布（累积使用次数5000+次、用户2000+、管理设备22000+次），B站粉丝破1W+、Csdn粉丝破1K、哈基创工具箱小程序用户破2000+
                  </p>
                </div>
              </div>
            </div>

            <!-- 2026年 -->
            <div class="flex items-center">
              <div class="flex-1 text-right pr-8">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                  <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2026年</h4>
                  <p class="text-sm dark:text-slate-400">持续创新，探索更多可能性</p>
                </div>
              </div>
              <div class="z-10 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="flex-1 pl-8"></div>
            </div>
          </div>

          <!-- 移动端时间线 -->
          <div class="md:hidden">
            <!-- 2020年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2020年</h4>
                <p class="text-sm dark:text-slate-400">工作室‘’成立”，开始专注于安卓移动应用开发</p>
              </div>
            </div>

            <!-- 2021年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2021年</h4>
                <p class="text-sm dark:text-slate-400">
                  着手Logo设计、平面设计，为仙龙阁、智简云、HZLM画质助手、LY画质盒、十三导航、极光点等产品、组织设计Logo
                </p>
              </div>
            </div>

            <!-- 2022年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2022年</h4>
                <p class="text-sm dark:text-slate-400">开发多款安卓小程序和安卓面具模块资源</p>
              </div>
            </div>

            <!-- 2023年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2023年</h4>
                <p class="text-sm dark:text-slate-400">
                  专注安卓玩机领域，免费/付费远程刷机救砖服务上百个客户、一键Root工具箱发布（用户破千）
                </p>
              </div>
            </div>

            <!-- 2024年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2024年</h4>
                <p class="text-sm dark:text-slate-400">
                  专注安卓玩机领域，付费远程刷机救砖服务上线闲鱼和淘宝平台（单月最高破4000元收入）、基于Bat的澎湃解锁工具箱发布（累积用户近千人）
                </p>
              </div>
            </div>

            <!-- 2025年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2025年</h4>
                <p class="text-sm dark:text-slate-400">
                  关键年，持续专注安卓玩机领域、编程能力与数字内容平台，基于Pyside6的澎湃解锁工具箱发布（累积用户近万人）、基于Tauri+React+Tauri的玩机管家发布（累积使用次数5000+次、用户2000+、管理设备22000+次），B站粉丝破1W+、Csdn粉丝破1K、哈基创工具箱小程序用户破2000+
                </p>
              </div>
            </div>

            <!-- 2026年 -->
            <div class="mb-6 pl-8 relative">
              <div class="absolute left-0 top-2 w-4 h-4 bg-blue-600 rounded-full"></div>
              <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md">
                <h4 class="font-bold text-lg text-blue-600 dark:text-blue-400">2026年</h4>
                <p class="text-sm dark:text-slate-400">持续创新，探索更多可能性</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Fragment>
    <Fragment slot="callToAction">
      <a href="/contact" class="btn-primary">联系我们</a>
    </Fragment>
    <Fragment slot="image">
      <div class="space-y-6 p-6">
        <HonorCarousel />

        <h3 class="text-2xl font-bold text-slate-800 dark:text-white text-center">功能跳转</h3>

        <div class="grid grid-cols-1 gap-4">
          <a
            href="/contact"
            class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 group"
          >
            <div
              class="w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-full flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors"
            >
              <svg
                class="w-6 h-6 text-blue-600 dark:text-blue-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                ></path>
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-slate-800 dark:text-white">联系我们</h4>
              <p class="text-sm text-slate-500 dark:text-slate-400">商务合作与咨询</p>
            </div>
            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>

          <a
            href="/contact#media-platforms"
            class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 group"
          >
            <div
              class="w-12 h-12 bg-purple-100 dark:bg-purple-900/50 rounded-full flex items-center justify-center group-hover:bg-purple-200 dark:group-hover:bg-purple-800 transition-colors"
            >
              <svg
                class="w-6 h-6 text-purple-600 dark:text-purple-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
                ></path>
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-slate-800 dark:text-white">媒体平台</h4>
              <p class="text-sm text-slate-500 dark:text-slate-400">B站、CSDN等平台</p>
            </div>
            <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>

          <a
            href="/contact#qun-group"
            class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 group"
          >
            <div
              class="w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center group-hover:bg-green-200 dark:group-hover:bg-green-800 transition-colors"
            >
              <svg
                class="w-6 h-6 text-green-600 dark:text-green-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                ></path>
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-slate-800 dark:text-white">社区群聊</h4>
              <p class="text-sm text-slate-500 dark:text-slate-400">加入我们的社区</p>
            </div>
            <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>

          <a
            href="/ycsj"
            class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 group"
          >
            <div
              class="w-12 h-12 bg-orange-100 dark:bg-orange-900/50 rounded-full flex items-center justify-center group-hover:bg-orange-200 dark:group-hover:bg-orange-800 transition-colors"
            >
              <svg
                class="w-6 h-6 text-orange-600 dark:text-orange-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-slate-800 dark:text-white">远程刷机</h4>
              <p class="text-sm text-slate-500 dark:text-slate-400">专业刷机服务</p>
            </div>
            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>

          <a
            href="/donate"
            class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 group"
          >
            <div
              class="w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center group-hover:bg-red-200 dark:group-hover:bg-red-800 transition-colors"
            >
              <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                ></path>
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-slate-800 dark:text-white">捐赠我们</h4>
              <p class="text-sm text-slate-500 dark:text-slate-400">支持我们发展</p>
            </div>
            <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    </Fragment>
  </Content>

  <!-- 模态框 -->
  <Modal />
</Layout>
